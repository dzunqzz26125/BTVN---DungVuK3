<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MAP</title>
  </head>
  <body>
    <script>
      /**
         * Phương thức map2()
        Hãy mở rộng Array.prototype bằng cách thêm một phương thức mới là map2(callback) có chức năng tương tự như phương thức map() nguyên bản của JavaScript.

        Cụ thể:

        Phương thức này nhận một hàm callback làm tham số duy nhất (bỏ qua tham số thisArg). Hàm này sẽ được gọi cho từng phần tử trong mảng.
        Hàm callback nhận vào 3 tham số: giá trị hiện tại, chỉ số của phần tử và chính mảng đó.
        Phương thức sẽ trả về một mảng mới với các giá trị được tạo từ hàm callback.
        Phương thức sẽ bỏ qua các phần tử trống (empty elements) trong mảng khi gọi callback, nhưng phần tử tương ứng trong mảng mới sẽ được giữ là empty element.
        Phương thức chỉ lặp qua các phần tử có chỉ số từ 0 đến length ban đầu của mảng (nếu mảng thay đổi trong quá trình lặp, số lần lặp không bị thay đổi).
        Yêu cầu: Không được sử dụng phương thức map() nguyên bản của JavaScript.
        */
      Array.prototype.map2 = function (callback) {
        if (typeof callback !== "function") {
          throw new TypeError(callback + " is not a function");
        }

        const result = [];
        const length = this.length;

        for (let i = 0; i < length; i++) {
          if (i in this) {
            result[i] = callback(this[i], i, this);
          }
        }

        return result;
      };

      const arr1 = [1, 2, 3, 4, 5];
      const result1 = arr1.map2((value) => value * 2);

      console.log(result1); // [2, 4, 6, 8, 10]
      console.log(result1.length); // 5
    </script>
  </body>
</html>
