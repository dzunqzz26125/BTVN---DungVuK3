<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /**
         * Viết một hàm để sắp xếp danh sách người dùng theo tên
          Hàm sortUsersByName(users):

          Nhận vào một mảng các object người dùng, mỗi object có thuộc tính fullName.
          Trả về mảng đã được sắp xếp theo thứ tự bảng chữ cái từ a-z của tên.
          Nếu tên của hai người giống nhau, tiếp tục so sánh theo họ và tên đệm (Biết rằng người Việt có tên là 1 từ đơn đứng ở cuối cùng, còn lại toàn bộ các từ trong tên đầy đủ của người Việt được coi là họ và tên đệm).
          Ví dụ:

          Nguyễn Minh Hoàng -> "Hoàng" là tên, "Nguyễn Minh" là họ và tên đệm.
          Nguyễn Thị Thuỳ Linh -> "Linh" là tên, "Nguyễn Thị Thuỳ" là họ và tên đệm.
          function sortUsersByName(users) {
            // Xử lý và in ra kết quả
          }

          // Input:
          const users = [
            { fullName: "Nguyễn Minh Hoàng" },
            { fullName: "Nguyễn Đức Hoàng" },
            { fullName: "Lê Văn" },
            { fullName: "Lê Văn Tình" },
            { fullName: "Lê Nin" },
          ];
          sortUsersByName(users);
          // Output:
          [
            { fullName: "Nguyễn Đức Hoàng" }, // Tên: Hoàng, Họ và tên đệm: Nguyễn Đức
            { fullName: "Nguyễn Minh Hoàng" }, // Tên: Hoàng, Họ và tên đệm: Nguyễn Minh
            { fullName: "Lê Nin" }, // Tên: Nin
            { fullName: "Lê Văn Tình" }, // Tên: Tình
            { fullName: "Lê Văn" }, // Tên: Văn
          ];
        */
      const users = [
        { fullName: "Nguyễn Minh Hoàng" },
        { fullName: "Nguyễn Đức Hoàng" },
        { fullName: "Lê Văn" },
        { fullName: "Lê Văn Tình" },
        { fullName: "Lê Nin" },
      ];

      function splitName(fullName) {
        const parts = fullName.trim().split(/\s+/);
        return {
          name: parts[parts.length - 1],
          family: parts.slice(0, -1).join(" "),
        };
      }

      function compareString(a, b) {
        if (a < b) return -1;
        if (a > b) return 1;
        return 0;
      }

      function sortUsersByName(users) {
        const result = [...users];
        result.sort((u1, u2) => {
          const a = splitName(u1.fullName);
          const b = splitName(u2.fullName);
          const nameCompare = compareString(a.name, b.name);
          if (nameCompare !== 0) return nameCompare;
          return compareString(a.family, b.family);
        });

        return result;
      }

      const result = sortUsersByName(users);
      console.log(result);
    </script>
  </body>
</html>
